schema: '2.0'
stages:
  prepare_data:
    cmd: py ./prepare_data.py
    deps:
    - path: ./archive/imdb-dataset.csv
      hash: md5
      md5: 308443a50e5c993e7b8a1cdb95750026
      size: 66212309
    - path: ./prepare_data.py
      hash: md5
      md5: 62662b641c10f31cfefa5a4cae61d719
      size: 646
    params:
      params.yaml:
        data:
          csv_file_path: ./archive/imdb-dataset.csv
          test_set_ratio: 0.3
          train_csv_save_path: ./archive/train.csv
          test_csv_save_path: ./archive/test.csv
    outs:
    - path: ./archive/test.csv
      hash: md5
      md5: 901990d46f51767548b81e1cc4dafe0c
      size: 46514309
    - path: ./archive/train.csv
      hash: md5
      md5: 901990d46f51767548b81e1cc4dafe0c
      size: 46514309
  make_features:
    cmd: py ./make_features.py
    deps:
    - path: ./archive/test.csv
      hash: md5
      md5: 901990d46f51767548b81e1cc4dafe0c
      size: 46514309
    - path: ./archive/train.csv
      hash: md5
      md5: 901990d46f51767548b81e1cc4dafe0c
      size: 46514309
    - path: ./make_features.py
      hash: md5
      md5: 9146728621cafbca714ac9ff42d8334f
      size: 928
    params:
      params.yaml:
        features:
          vectorizer: tfidf-vectorizer
          train_features_save_path: ./archive/train.joblib
          test_features_save_path: ./archive/test.joblib
    outs:
    - path: ./archive/test.joblib
      hash: md5
      md5: 1aef4bb76bd5ed73091b74f88aea8bd4
      size: 37416211
    - path: ./archive/train.joblib
      hash: md5
      md5: 5afaaace56f2d324f6cc98a120b9de05
      size: 37416211
  train:
    cmd: py ./train.py
    deps:
    - path: ./archive/train.csv
      hash: md5
      md5: 901990d46f51767548b81e1cc4dafe0c
      size: 46514309
    - path: ./archive/train.joblib
      hash: md5
      md5: 5afaaace56f2d324f6cc98a120b9de05
      size: 37416211
    - path: ./train.py
      hash: md5
      md5: 09aead9f2d960362e69e562413933e4f
      size: 769
    params:
      params.yaml:
        train:
          penalty: l2
          C: 1.0
          solver: lbfgs
          model_save_path: ./archive/model.joblib
    outs:
    - path: ./archive/model.joblib
      hash: md5
      md5: 43558cbfd84be418e1e5857285b9092b
      size: 704335
  evaluate:
    cmd: py ./evaluate.py
    deps:
    - path: ./archive/model.joblib
      hash: md5
      md5: 43558cbfd84be418e1e5857285b9092b
      size: 704335
    - path: ./archive/test.csv
      hash: md5
      md5: 901990d46f51767548b81e1cc4dafe0c
      size: 46514309
    - path: ./archive/test.joblib
      hash: md5
      md5: 1aef4bb76bd5ed73091b74f88aea8bd4
      size: 37416211
    - path: ./evaluate.py
      hash: md5
      md5: c63da6c63ce2fff453bf415a9fa52f93
      size: 981
    params:
      params.yaml:
        evaluate:
          metric: f1_score
          results_save_path: ./archive/results.yaml
    outs:
    - path: ./archive/results.yaml
      hash: md5
      md5: db16c477607543256ad3755dbd2bacdf
      size: 30
